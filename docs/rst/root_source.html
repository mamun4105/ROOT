

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6. rootcode package &mdash; ROOT 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="7. Release Notes" href="release_notes.html" />
    <link rel="prev" title="5. Examples" href="examples.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> ROOT
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">2. Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface_guide.html">3. Interface guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="sample_data_walkthrough.html">4. Sample data walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">5. Examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">6. ROOT UI code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#root-module">6.1. root module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#preprocessing-module">6.2. preprocessing module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-rootcode.optimization">6.3. optimization module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-rootcode.optim_core">6.4. optim_core module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#postprocessing-module">6.5. postprocessing module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-rootcode.arith_parser">6.6. arith_parser module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">7. Release Notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ROOT</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">6. </span>rootcode package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/rst/root_source.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rootcode-package">
<h1><span class="section-number">6. </span>rootcode package<a class="headerlink" href="#rootcode-package" title="Permalink to this headline">¶</a></h1>
<p>This page provides documentation for ROOT’s python code. It is not necessary to read this documentation to use ROOT through the UI, but it is provided for interested users. Most modules have private functions that can be inspected by clicking on the “source” links. This documentation currently has a number of formatting issues that need to be fixed.</p>
<div class="section" id="root-module">
<h2><span class="section-number">6.1. </span>root module<a class="headerlink" href="#root-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="preprocessing-module">
<h2><span class="section-number">6.2. </span>preprocessing module<a class="headerlink" href="#preprocessing-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-rootcode.optimization">
<span id="optimization-module"></span><h2><span class="section-number">6.3. </span>optimization module<a class="headerlink" href="#module-rootcode.optimization" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="rootcode.optimization.ensure_args_dict">
<code class="sig-prename descclassname">rootcode.optimization.</code><code class="sig-name descname">ensure_args_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optimization.html#ensure_args_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optimization.ensure_args_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>args can be a dict or a json filename, returns a dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="rootcode.optimization.execute">
<code class="sig-prename descclassname">rootcode.optimization.</code><code class="sig-name descname">execute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_file_or_dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optimization.html#execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optimization.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a config json file or dict, completes the entire optimization processing flow.
config_file_or_dict must contain:</p>
<blockquote>
<div><ul class="simple">
<li><p>data_folder: folder containing the value tables</p></li>
<li><p>sdu_id_col: the column in the value tables that indexes each SDU</p></li>
<li><p>baseline_file: management option to treat as choice 0</p></li>
<li><p>optimization_folder: output folder</p></li>
<li><p>analysis_type: one of the options provided by oooe</p></li>
</ul>
</div></blockquote>
<p>config_file_or_dict must also contain values that describe the optimization
problem to be solved. These will depend on the analysis type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config_file_or_dict</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="rootcode.optimization.get_activity_names">
<code class="sig-prename descclassname">rootcode.optimization.</code><code class="sig-name descname">get_activity_names</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">include_baseline</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optimization.html#get_activity_names"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optimization.get_activity_names" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the names of the activities with baseline first</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="rootcode.optimization.get_data_cols">
<code class="sig-prename descclassname">rootcode.optimization.</code><code class="sig-name descname">get_data_cols</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optimization.html#get_data_cols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optimization.get_data_cols" title="Permalink to this definition">¶</a></dt>
<dd><p>extracts the data table column names that will be used by the optimizer.
these will be the names of the objective and constraint variables.</p>
</dd></dl>

<dl class="py function">
<dt id="rootcode.optimization.get_header_list">
<code class="sig-prename descclassname">rootcode.optimization.</code><code class="sig-name descname">get_header_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">delimiter</span><span class="o">=</span><span class="default_value">','</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optimization.html#get_header_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optimization.get_header_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the first line of filename, splits it with delimiter, returns the
resulting list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – </p></li>
<li><p><strong>delimiter</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="rootcode.optimization.make_analysis_def">
<code class="sig-prename descclassname">rootcode.optimization.</code><code class="sig-name descname">make_analysis_def</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optimization.html#make_analysis_def"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optimization.make_analysis_def" title="Permalink to this definition">¶</a></dt>
<dd><p>This function just makes a copy and returns it. It used to do a lot more, but
that functionality has been moved to the analysis objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="rootcode.optimization.make_analysis_object">
<code class="sig-prename descclassname">rootcode.optimization.</code><code class="sig-name descname">make_analysis_object</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">analysis_def</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optimization.html#make_analysis_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optimization.make_analysis_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the appropriate oooe.Analysis object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – </p></li>
<li><p><strong>analysis_def</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="rootcode.optimization.make_exclude_list">
<code class="sig-prename descclassname">rootcode.optimization.</code><code class="sig-name descname">make_exclude_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optimization.html#make_exclude_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optimization.make_exclude_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-rootcode.optim_core">
<span id="optim-core-module"></span><h2><span class="section-number">6.4. </span>optim_core module<a class="headerlink" href="#module-rootcode.optim_core" title="Permalink to this headline">¶</a></h2>
<p>Contains primary class types for optimization analyses.</p>
<p>These are:</p>
<ul>
<li><p><a class="reference internal" href="#rootcode.optim_core.Data" title="rootcode.optim_core.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Data</span></code></a> which holds the tables giving objective/constraint scores for each potential decision.</p></li>
<li><p><a class="reference internal" href="#rootcode.optim_core.Problem" title="rootcode.optim_core.Problem"><code class="xref py py-class docutils literal notranslate"><span class="pre">Problem</span></code></a> which holds a single optimization problem.</p></li>
<li><p><a class="reference internal" href="#rootcode.optim_core.Analysis" title="rootcode.optim_core.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">Analysis</span></code></a> and subclasses, which hold a collection of problems that make up a trade-off curve or other analysis.</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#rootcode.optim_core.Single" title="rootcode.optim_core.Single"><code class="xref py py-class docutils literal notranslate"><span class="pre">Single</span></code></a></p></li>
<li><p><a class="reference internal" href="#rootcode.optim_core.ConfigList" title="rootcode.optim_core.ConfigList"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigList</span></code></a></p></li>
<li><p><a class="reference internal" href="#rootcode.optim_core.NDimFrontier" title="rootcode.optim_core.NDimFrontier"><code class="xref py py-class docutils literal notranslate"><span class="pre">NDimFrontier</span></code></a></p></li>
<li><p><a class="reference internal" href="#rootcode.optim_core.WeightTableIterator" title="rootcode.optim_core.WeightTableIterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">WeightTableIterator</span></code></a></p></li>
</ul>
</div></blockquote>
</li>
</ul>
<dl class="py class">
<dt id="rootcode.optim_core.Analysis">
<em class="property">class </em><code class="sig-prename descclassname">rootcode.optim_core.</code><code class="sig-name descname">Analysis</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">config</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Analysis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Parent class for all analysis types.</p>
<p>What are the functions/capabilities that all analyses need to have?</p>
<ol class="arabic simple">
<li><p>run</p></li>
<li><p>get item: analysis[i] returns ith point</p></li>
<li><p>iterate through stored points</p></li>
<li><p>save to reports (summary, full details, maps)</p></li>
</ol>
<p>This class assumes that all problems will be added to a list (self.problems), and that
the problems have a problem.solve() method. Calling self.run() on the analysis will
call solve() on all problems.</p>
<dl class="py method">
<dt id="rootcode.optim_core.Analysis.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">config</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Analysis.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Analysis.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates empty <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.problems</span></code> list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference internal" href="#rootcode.optim_core.Data" title="rootcode.optim_core.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Data</span></code></a>) – contains problem data</p></li>
<li><p><strong>config</strong> (<em>dict</em>) – values to configure specific analysis type</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Analysis.factor_scores">
<code class="sig-name descname">factor_scores</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">factor</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Analysis.factor_scores"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Analysis.factor_scores" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Analysis.problem_dict">
<code class="sig-name descname">problem_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Analysis.problem_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Analysis.problem_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Analysis.report">
<code class="sig-name descname">report</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">report_file</span></em>, <em class="sig-param"><span class="n">report_type</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Analysis.report"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Analysis.report" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Analysis.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Analysis.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Analysis.run" title="Permalink to this definition">¶</a></dt>
<dd><p>calls <a class="reference internal" href="#rootcode.optim_core.Problem.solve" title="rootcode.optim_core.Problem.solve"><code class="xref py py-meth docutils literal notranslate"><span class="pre">solve()</span></code></a> on all problems in <cite>self.problems</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Analysis.save_decision_tables">
<code class="sig-name descname">save_decision_tables</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">folder</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Analysis.save_decision_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Analysis.save_decision_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="#rootcode.optim_core.Problem.solution_to_csv" title="rootcode.optim_core.Problem.solution_to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">solution_to_csv()</span></code></a> on all problems in <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.problems</span></code>. Files will be
generated at <code class="file docutils literal notranslate"><span class="pre">folder/solution_id.csv</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>folder</strong> (<em>str</em>) – output folder (will be created if it does not exist)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Analysis.save_summary_table">
<code class="sig-name descname">save_summary_table</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">folder</span></em>, <em class="sig-param"><span class="n">add_cols</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Analysis.save_summary_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Analysis.save_summary_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a table with summary stats (summed results) for each solution in the <a class="reference internal" href="#rootcode.optim_core.Analysis" title="rootcode.optim_core.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">Analysis</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder</strong> (<em>str</em>) – output folder (will be created if it does not exist)</p></li>
<li><p><strong>add_cols</strong> (<em>dict</em>) – column names and data to add to output table</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Analysis.save_summed_choices">
<code class="sig-name descname">save_summed_choices</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">folder</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Analysis.save_summed_choices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Analysis.save_summed_choices" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves results of <a class="reference internal" href="#rootcode.optim_core.Analysis.summed_choices" title="rootcode.optim_core.Analysis.summed_choices"><code class="xref py py-meth docutils literal notranslate"><span class="pre">summed_choices()</span></code></a> to a csv with option names as headers.</p>
<p>The file will be saved to <code class="file docutils literal notranslate"><span class="pre">folder/summed_choices.csv</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>folder</strong> (<em>str</em>) – output folder (will be created if it does not exist)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Analysis.summed_choices">
<code class="sig-name descname">summed_choices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Analysis.summed_choices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Analysis.summed_choices" title="Permalink to this definition">¶</a></dt>
<dd><p>Sums <span class="math notranslate nohighlight">\(x_{pc}\)</span> for each parcel and choice across all solutions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>np.array (n_parcels, n_opts)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="rootcode.optim_core.ConfigList">
<em class="property">class </em><code class="sig-prename descclassname">rootcode.optim_core.</code><code class="sig-name descname">ConfigList</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">config_list</span></em>, <em class="sig-param"><span class="n">solver</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#ConfigList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.ConfigList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rootcode.optim_core.Analysis" title="rootcode.optim_core.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">rootcode.optim_core.Analysis</span></code></a></p>
<p>Helper analysis for script-driven batching.</p>
<p>Allows creation of analyses from a list of configuration dictionaries.</p>
<p>e.g. iterating through constraint values.</p>
</dd></dl>

<dl class="py class">
<dt id="rootcode.optim_core.Constraint">
<em class="property">class </em><code class="sig-prename descclassname">rootcode.optim_core.</code><code class="sig-name descname">Constraint</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">factor</span></em>, <em class="sig-param"><span class="n">type</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#rootcode.optim_core.Constraint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="py method">
<dt id="rootcode.optim_core.Constraint.factor">
<em class="property">property </em><code class="sig-name descname">factor</code><a class="headerlink" href="#rootcode.optim_core.Constraint.factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Constraint.type">
<em class="property">property </em><code class="sig-name descname">type</code><a class="headerlink" href="#rootcode.optim_core.Constraint.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Constraint.value">
<em class="property">property </em><code class="sig-name descname">value</code><a class="headerlink" href="#rootcode.optim_core.Constraint.value" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="rootcode.optim_core.Data">
<em class="property">class </em><code class="sig-prename descclassname">rootcode.optim_core.</code><code class="sig-name descname">Data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_dir</span></em>, <em class="sig-param"><span class="n">sdu_id_col</span></em>, <em class="sig-param"><span class="n">data_cols</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">baseline_file</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">file_list</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">files_by_factor</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">file_glob_str</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sample</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sample_seed</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Data" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Holds data needed for optimization</p>
<p>After initialization refer to <code class="docutils literal notranslate"><span class="pre">data.factor_names</span></code> and <code class="docutils literal notranslate"><span class="pre">data.option_names</span></code>
for the labels attached to each category. These are taken from file or column names depending
on the files_by_factor argument.</p>
<p>Specific data tables can be referenced by <code class="docutils literal notranslate"><span class="pre">data[factor_name]</span></code>, similar to dictionary reference
Columns for particular options can be referenced by <code class="docutils literal notranslate"><span class="pre">data[factor_name,</span> <span class="pre">option_name]</span></code></p>
<dl class="py method">
<dt id="rootcode.optim_core.Data.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_dir</span></em>, <em class="sig-param"><span class="n">sdu_id_col</span></em>, <em class="sig-param"><span class="n">data_cols</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">baseline_file</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">file_list</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">files_by_factor</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">file_glob_str</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sample</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sample_seed</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Data.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Data.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_dir</strong> – directory to load data from.</p></li>
<li><p><strong>sdu_id_col</strong> – name of SDU key column</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>data_cols</strong> – names of columns to pull from csv files, default (None) pulls all</p></li>
<li><p><strong>baseline_file</strong> – optional name of baseline file to move to first position in option list</p></li>
<li><p><strong>file_list</strong> – list of files (only the basename) to load from data_dir.</p></li>
<li><p><strong>files_by_factor</strong> – if True, treats separate files as corresponding to factors with one column per option.
Otherwise treats files as corresponding to options with one column per factor</p></li>
<li><p><strong>file_glob_str</strong> – if None, loads files in data_dir matching ‘<a href="#id1"><span class="problematic" id="id2">*</span></a>.csv’, otherwise will match given pattern</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Data.factor_values_for_solution">
<code class="sig-name descname">factor_values_for_solution</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sol</span></em>, <em class="sig-param"><span class="n">varnames</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Data.factor_values_for_solution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Data.factor_values_for_solution" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary containing the summed values for each factor
in data. keys are factornames, values are the sums.</p>
<p>Caller can subset which cols to return with varnames list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sol</strong> – real [0 - 1] valued array of size (n_parcels, n_opts)</p></li>
<li><p><strong>varnames</strong> – optional list of factors to evaluate</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="rootcode.optim_core.NDimFrontier">
<em class="property">class </em><code class="sig-prename descclassname">rootcode.optim_core.</code><code class="sig-name descname">NDimFrontier</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">solver</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#NDimFrontier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.NDimFrontier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rootcode.optim_core.Analysis" title="rootcode.optim_core.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">rootcode.optim_core.Analysis</span></code></a></p>
<p>Monte Carlo sampling of N-dimensional frontier.</p>
<p>This class generates random uniformly distributed weight vectors and
runs the optimization for each of these.</p>
<dl>
<dt>config should be a dict structured as follows:</dt><dd><p>‘npts’: number of points to build in frontier
‘objectives’: [factornames]
‘weights’: {factornames}: +/- 1.0 for each factor to determine max or min goals
‘constraints’: [ (factorname, type, value), … ]
‘fixedvals’: {index: value}: x_index will be constrained to value
‘excludedvals’ {index: list}: x_index_j will be set to zero for each</p>
<blockquote>
<div><p>j in list</p>
</div></blockquote>
</dd>
<dt>deprecated:</dt><dd><p>‘targets’: {factornames}: target for each factor with a target
‘targettypes’: {factornames}: ‘&lt;’, ‘&gt;’, or ‘=’ (inequals will allow ==)</p>
</dd>
</dl>
<p>example of frontier_def coming from root_ui:
{</p>
<blockquote>
<div><p>‘analysis_type’: u’n_dim_frontier’,
‘flatten_objectives’: False,
‘normalize_objectives’: True,
‘npts’: 15,
‘objectives’: [‘sed_hyd’, ‘phos_wetl’, ‘n_export’],
‘targets’: {‘maskpixha’: 20000.0},
‘targettypes’: {‘maskpixha’: ‘=’},
‘use_mp’: False,
‘weights’: {‘n_export’: -1.0, ‘phos_wetl’: -1.0, ‘sed_hyd’: -1.0}</p>
</div></blockquote>
<p>}</p>
</dd></dl>

<dl class="py class">
<dt id="rootcode.optim_core.NPFixedSeed">
<em class="property">class </em><code class="sig-prename descclassname">rootcode.optim_core.</code><code class="sig-name descname">NPFixedSeed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">seed</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#NPFixedSeed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.NPFixedSeed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>For use as a context manager for controllable rng. Ensures that numpys’s rng is returned to
original state outside of the calling context.</p>
</dd></dl>

<dl class="py class">
<dt id="rootcode.optim_core.Problem">
<em class="property">class </em><code class="sig-prename descclassname">rootcode.optim_core.</code><code class="sig-name descname">Problem</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">problem_def</span></em>, <em class="sig-param"><span class="n">solver</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Problem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Problem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The problem class. Represents a single optimization evaluation.</p>
<p>problem_def should be a dict structured as follows</p>
<ul>
<li><p>‘weights’: {factorname: weight} for each factor &lt;- i.e. another dict</p></li>
<li><p>‘constraints’: [ (factorname, type, value), …] list of single-factor constraints</p></li>
<li><dl>
<dt>‘factor_by_option_constraints’: [ (factorname, option, type, value), … ] applies the constraint</dt><dd><p>only to the listed option.</p>
<dl class="simple">
<dt>deprecated:</dt><dd><p>‘targets’: {factorname: target} for each factor with a target
‘target_types’: {factorname: ‘&lt;’, ‘&gt;’, or ‘=’ } (inequals will allow ==)</p>
</dd>
</dl>
</dd>
</dl>
</li>
</ul>
<dl>
<dt>optional problem args:</dt><dd><p>‘fixed_vals’: {index: value}: x_index will be constrained to value
‘excluded_vals’ {index: list}: x_index_j will be set to zero for each</p>
<blockquote>
<div><p>j in list</p>
</div></blockquote>
<dl>
<dt>‘exclusive_choices’: None, list, or list of lists. The values in the list should be the j-indices</dt><dd><p>of the options to be made mutually-exclusive
* None: default, assumes that all choices are mutually exclusive
* list: only the options in the list are exclusive with each other. All options not in the</p>
<blockquote>
<div><p>list can be selected regardless of selection in the listed options, or the other
non-listed options</p>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>list of lists: creates several sets of mutually exclusive options, but can choose one option</dt><dd><p>from each set. Options not included in a list can be selected or not independent of
selection in the mutually-exlusive sets.</p>
</dd>
</dl>
</li>
</ul>
</dd>
<dt>‘normalize_objectives’: True or False (assumed False if arg not present)</dt><dd><p>this will rescale all arguments to be between 0 and 1
‘flatten_objectives’: True or False (assumed False if arg not present)
this replaces objective values with their relative rank
NOTE: I think this might produce solutions that aren’t actually
on the frontier.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="rootcode.optim_core.Problem.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">problem_def</span></em>, <em class="sig-param"><span class="n">solver</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Problem.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Problem.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Problem creation function</p>
<p>after the problem has been run, the results are attainable as:</p>
<ul class="simple">
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">p.solution</span></code>: nsdus x nopts numpy array with values between 0 and 1</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">p.objective_values</span></code>: {factor: value} summed scores for all factors</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – a Data object</p></li>
<li><p><strong>problem_def</strong> – a dictionary describing the problem to solve</p></li>
<li><p><strong>solver</strong> – optional argument to specify the solver</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Problem.add_constraint">
<code class="sig-name descname">add_constraint</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">factorname</span></em>, <em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">type</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Problem.add_constraint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Problem.add_constraint" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Problem.add_weight">
<code class="sig-name descname">add_weight</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">factorname</span></em>, <em class="sig-param"><span class="n">weight</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Problem.add_weight"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Problem.add_weight" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Problem.normalize_factor_data">
<em class="property">static </em><code class="sig-name descname">normalize_factor_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fv</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Problem.normalize_factor_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Problem.normalize_factor_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Problem.remove_constraint">
<code class="sig-name descname">remove_constraint</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">factorname</span></em>, <em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">type</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Problem.remove_constraint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Problem.remove_constraint" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Problem.remove_weight">
<code class="sig-name descname">remove_weight</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">factorname</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Problem.remove_weight"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Problem.remove_weight" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Problem.single_choice_constraint_mats">
<em class="property">static </em><code class="sig-name descname">single_choice_constraint_mats</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nunits</span></em>, <em class="sig-param"><span class="n">nopts</span></em>, <em class="sig-param"><span class="n">opt_set</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Problem.single_choice_constraint_mats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Problem.single_choice_constraint_mats" title="Permalink to this definition">¶</a></dt>
<dd><p>converts nunits integer variables to nunits*nopts binary variables.
use case here is for choosing 1 out of nopts options for each unit</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nunits</strong> – </p></li>
<li><p><strong>nopts</strong> – </p></li>
<li><p><strong>opt_set</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Problem.solution_to_csv">
<code class="sig-name descname">solution_to_csv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filepath</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Problem.solution_to_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Problem.solution_to_csv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Problem.solve">
<code class="sig-name descname">solve</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Problem.solve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Problem.solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds the MILP problem and calls a solver.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Optimized decision vector (matrix)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>solution (np.array)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="rootcode.optim_core.Single">
<em class="property">class </em><code class="sig-prename descclassname">rootcode.optim_core.</code><code class="sig-name descname">Single</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">weights</span></em>, <em class="sig-param"><span class="n">solver</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Single"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Single" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rootcode.optim_core.Analysis" title="rootcode.optim_core.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">rootcode.optim_core.Analysis</span></code></a></p>
<p>Analysis container for a single optimization run.</p>
<dl class="py method">
<dt id="rootcode.optim_core.Single.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">weights</span></em>, <em class="sig-param"><span class="n">solver</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Single.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Single.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – instance of <a class="reference internal" href="#rootcode.optim_core.Data" title="rootcode.optim_core.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Data</span></code></a></p></li>
<li><p><strong>config</strong> – </p></li>
<li><p><strong>solver</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="rootcode.optim_core.Single.problem_dict">
<code class="sig-name descname">problem_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#Single.problem_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.Single.problem_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="rootcode.optim_core.WeightTableIterator">
<em class="property">class </em><code class="sig-prename descclassname">rootcode.optim_core.</code><code class="sig-name descname">WeightTableIterator</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">solver</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#WeightTableIterator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.WeightTableIterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rootcode.optim_core.Analysis" title="rootcode.optim_core.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">rootcode.optim_core.Analysis</span></code></a></p>
<p>Analysis with user-specifed weights for each contained problem.</p>
<p>config should be a dict structured as follows:
.. code:
{</p>
<blockquote>
<div><p>‘npts’: number of points to build in frontier
‘objectives’: [factornames]
‘weights’: {factornames}: +/- 1.0 for each factor to determine max or min goals
‘constraints’: [ (factorname, type, value), … ]
‘fixedvals’: {index: value}: x_index will be constrained to value
‘excludedvals’ {index: list}: x_index_j will be set to zero for each</p>
<blockquote>
<div><p>j in list</p>
</div></blockquote>
</div></blockquote>
<dl class="simple">
<dt>deprecated:</dt><dd><p>‘targets’: {factornames}: target for each factor with a target
‘targettypes’: {factornames}: ‘&lt;’, ‘&gt;’, or ‘=’ (inequals will allow ==)</p>
</dd>
</dl>
<p>}</p>
<p>example of frontier_def coming from root_ui:
{</p>
<blockquote>
<div><p>‘analysis_type’: u’n_dim_frontier’,
‘flatten_objectives’: False,
‘normalize_objectives’: True,
‘npts’: 15,
‘objectives’: [‘sed_hyd’, ‘phos_wetl’, ‘n_export’],
‘targets’: {‘maskpixha’: 20000.0},
‘targettypes’: {‘maskpixha’: ‘=’},
‘use_mp’: False,
‘weights’: {‘n_export’: -1.0, ‘phos_wetl’: -1.0, ‘sed_hyd’: -1.0}</p>
</div></blockquote>
<p>}</p>
<dl class="py method">
<dt id="rootcode.optim_core.WeightTableIterator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">solver</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#WeightTableIterator.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.WeightTableIterator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#rootcode.optim_core.WeightTableIterator" title="rootcode.optim_core.WeightTableIterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">WeightTableIterator</span></code></a> requires that <code class="xref py py-attr docutils literal notranslate"><span class="pre">config['weights']</span></code> contain the path
to a .csv file with the appropriate sub-objective weights for each run to be
performed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – instance of <a class="reference internal" href="#rootcode.optim_core.Data" title="rootcode.optim_core.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Data</span></code></a></p></li>
<li><p><strong>config</strong> (<em>dict</em>) – </p></li>
<li><p><strong>solver</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="rootcode.optim_core.available_analysis_types">
<code class="sig-prename descclassname">rootcode.optim_core.</code><code class="sig-name descname">available_analysis_types</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#available_analysis_types"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.available_analysis_types" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="rootcode.optim_core.ensure_args_dict">
<code class="sig-prename descclassname">rootcode.optim_core.</code><code class="sig-name descname">ensure_args_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#ensure_args_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.ensure_args_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper to accept args as a json file or dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<em>dict</em><em> or </em><em>path to json file</em>) – </p>
</dd>
</dl>
<p>Returns: args as a dict</p>
</dd></dl>

<dl class="py function">
<dt id="rootcode.optim_core.run">
<code class="sig-prename descclassname">rootcode.optim_core.</code><code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_file</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/optim_core.html#run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.optim_core.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="postprocessing-module">
<h2><span class="section-number">6.5. </span>postprocessing module<a class="headerlink" href="#postprocessing-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-rootcode.arith_parser">
<span id="arith-parser-module"></span><h2><span class="section-number">6.6. </span>arith_parser module<a class="headerlink" href="#module-rootcode.arith_parser" title="Permalink to this headline">¶</a></h2>
<p>Helper module to parse expressions from the combined factors table.</p>
<dl class="py function">
<dt id="rootcode.arith_parser.apply">
<code class="sig-prename descclassname">rootcode.arith_parser.</code><code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_obj</span></em>, <em class="sig-param"><span class="n">arith_string</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rootcode/arith_parser.html#apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootcode.arith_parser.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a given expression to the values in data container.</p>
<p>Assumes a dict-style lookup, i.e. <code class="code docutils literal notranslate"><span class="pre">data_obj['varname']</span></code>. In particular,
this works with column names in DataFrames, and factor names in <a class="reference internal" href="#rootcode.optim_core.Data" title="rootcode.optim_core.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">optim_core.Data</span></code></a>.</p>
<p>An expression like “factor1 + 2 * factor2” returns a np.array containing the results of executing
<code class="code docutils literal notranslate"><span class="pre">data_obj['factor1']</span> <span class="pre">+</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">data_obj['factor2']</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_obj</strong> (<em>DataFrame</em><em> or </em><a class="reference internal" href="#rootcode.optim_core.Data" title="rootcode.optim_core.Data"><em>optim_core.Data</em></a>) – data container</p></li>
<li><p><strong>arith_string</strong> (<em>string</em>) – mathematical expression</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>np.array containing the result</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release_notes.html" class="btn btn-neutral float-right" title="7. Release Notes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="examples.html" class="btn btn-neutral float-left" title="5. Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2018, Peter Hawthorne

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>